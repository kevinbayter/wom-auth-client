<div class="dashboard-container">
  <!-- Loading State -->
  <div *ngIf="isLoading()" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Cargando información del usuario...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error() && !isLoading()" class="error-container">
    <mat-icon color="warn">error_outline</mat-icon>
    <p>{{ error() }}</p>
    <button mat-raised-button color="primary" (click)="handleRefresh()">
      <mat-icon>refresh</mat-icon>
      Reintentar
    </button>
  </div>

  <!-- Main Content (loaded state) -->
  <ng-container *ngIf="!isLoading() && !error() && currentUser()">
    <app-dashboard-header
      [user]="currentUser()"
      [userInitials]="userInitials()"
      (refresh)="handleRefresh()"
      (logout)="handleLogout()"
      (logoutAll)="handleLogoutAll()"
    ></app-dashboard-header>

  <div class="main-content">
    <section class="hero-section">
      <div class="hero-content">
        <div class="welcome-badge">
          <span class="material-icons">verified_user</span>
          <span>Autenticado</span>
        </div>
        <h1 class="hero-title">
          ¡Bienvenido <span class="accent">{{ currentUser()?.username }}</span>!
        </h1>
        <p class="hero-subtitle">
          Autenticación exitosa. Ya tienes acceso a todas las funcionalidades.
        </p>
      </div>
    </section>

    <section class="stats-section">
      <app-user-stats-cards [user]="currentUser()"></app-user-stats-cards>
    </section>

    <section class="profile-section">
      <app-user-profile-card
        [user]="currentUser()"
        [userInitials]="userInitials()"
        (refresh)="handleRefresh()"
        (logout)="handleLogout()"
      ></app-user-profile-card>
    </section>
  </ng-container>
</div>
